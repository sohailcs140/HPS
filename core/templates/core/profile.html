{% extends "core/base.html" %}
{% load crispy_forms_tags %}
{% load static %}

{% block title %}
    Profile
{% endblock title %}


{% block content %}
<style>
  
.hoverBottom {
  transition: all .3s ease-in-out;
  border: 1px solid #353C48;
  color: red;
}
.hoverBottom:hover{
  border-bottom: 1px solid #3E88FF;
}
</style>
      <div class="main-content">
        <section class="section">
          <div class="section-body">
                {% include 'core/includes/message.html' %}

            <div class="row mt-sm-4">
              <div class="col-12 col-md-12 col-lg-4">
                <div class="card author-box">
                  <div class="card-body">
                    {% comment %} <img alt="image" src="{{user.profile.picture.url}}" class="rounded-circle author-box-picture"> {% endcomment %}
                    <div class="author-box-center">
                      
                        {% if  request.user.profile.picture %}
                                <img
                                  alt="image"
                                  src="{{request.user.profile.picture.url}}"
                                  class="rounded-circle author-box-picture" />
                                  {% else %}

                                  {% if request.user.socialaccount_set.all.0.get_avatar_url %}
                                          <img class="rounded-circle author-box-picture" src="{{ request.user.socialaccount_set.all.0.get_avatar_url }}" alt="{{ request.user.username }}'s Profile Picture">
                                  {% else %}
                                  <img
                                  alt="image"
                                  src="{% static 'assets/img/users/profile.jpg' %}"
                                  class="rounded-circle author-box-picture" />
                                  {% endif %}
                              {% endif %}


                      <div class="clearfix"></div>
                      <div class="author-box-name">
                        <a href="#">{{request.user.username}}</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 col-md-12 col-lg-8">
                <div class="card">
                  <div class="padding-20">
                    <ul class="nav nav-tabs" id="myTab2" role="tablist">
                      <li class="nav-item">
                        <a class="nav-link active" id="home-tab2" data-toggle="tab" href="#about" role="tab"
                          aria-selected="true" style="color:#6777EF;">About</a>
                      </li>
                      <li class="nav-item">
                        <a class="nav-link" id="profile-tab2" data-toggle="tab" href="#settings" role="tab"
                          aria-selected="false" style="color:#6777EF;">Setting</a>
                      </li>
                    </ul>
                    <div class="tab-content " id="myTab3Content">
                      <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="home-tab2">
                        <div class="row">
                          <div class="col-md-3 col-6 b-r">
                            <strong>First Name</strong>
                            <br>
                            <p class="text-muted">{{request.user.first_name}}</p>
                          </div>
                          <div class="col-md-3 col-6 b-r">
                            <strong>Last Name</strong>
                            <br>
                            <p class="text-muted">{{request.user.last_name}}</p>
                          </div>
                          <div class="col-md-3 col-6 b-r">
                            <strong>Age</strong>
                            <br>
                            <p class="text-muted">{{request.user.profile.age}}</p>
                          </div>
                          <div class="col-md-3 col-6">
                            <strong>Gender</strong>
                            <br>
                            <p class="text-muted">
                                {% if request.user.profile.gender == '0' %}FeMale {% endif %}
                                {% if request.user.profile.gender == '1' %}Male {% endif %}
                                {% if request.user.profile.gender == '2' %}Other {% endif %}
                            </p>
                          </div>
                           <div class="col-md-6 col-6">
                            <strong>Email</strong>
                            <br>
                            <p class="text-muted">{{request.user.email}}</p>
                          </div>
                        </div>

                      </div>
                      <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="profile-tab2">
                        <form method="post" enctype="multipart/form-data"  class="needs-validation" action="{% url 'profile' %}">
                            {% csrf_token %}
                          <div class="card-header">
                            <h4>Edit Profile</h4>
                          </div>
                          <div class="card-body">
                            <div class="row">
                              <div class="form-group col-md-6 col-12">
                                <label>First Name</label>
                                <input type="text" class="form-control" name="first_name" value="{{request.user.first_name}}">
                              </div>
                              <div class="form-group col-md-6 col-12">
                                <label>Last Name</label>
                                <input type="text" class="form-control"name="last_name" value="{{request.user.last_name}}">
                              </div>
                            </div>
                            <div class="row">
                              <div class="form-group col-md-12 col-12">
                                {{form.age|as_crispy_field}}
                              </div>
                            </div>

                            <div class="row">
                              <div class="form-group col-md-12 col-12">
                                {{form.gender|as_crispy_field}}
                              </div>
                            </div>
                            <div class="row">
                              <div class="form-group col-md-12 col-12">
                                {{form.picture|as_crispy_field}}
                              </div>
                            </div>

                          </div>
                          <div class="card-footer text-right">
                            <button class="btn btn-outline-primary" type="submit">Save Changes</button>
                          </div>
                        </form>
                        <a class="hoverBottom" href="{% url 'account_set_password' %}">Change Password</a>

                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
{% endblock content %}
    
    